<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    
    <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="eufy Lumi Stick-On: Fading Night Light" />
<meta name="author" content="Dennis Schütt" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Do you have a dark stairway at night and you want it to be illuminated when you come across? This is why you bought the eufy Lumi Stick-On pack? Now you don’t use it because it switches on immediately when you get in its range?" />
<meta property="og:description" content="Do you have a dark stairway at night and you want it to be illuminated when you come across? This is why you bought the eufy Lumi Stick-On pack? Now you don’t use it because it switches on immediately when you get in its range?" />
<link rel="canonical" href="https://schuett.io/2018/02/eufy-lumi-smooth-fader/" />
<meta property="og:url" content="https://schuett.io/2018/02/eufy-lumi-smooth-fader/" />
<meta property="og:site_name" content="schuett.io" />
<meta property="og:image" content="https://schuett.io/postimg/eufi-lumi/3J7A7599.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-02-23T00:00:00+01:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://schuett.io/postimg/eufi-lumi/3J7A7599.jpg" />
<meta property="twitter:title" content="eufy Lumi Stick-On: Fading Night Light" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"Dennis Schütt"},"url":"https://schuett.io/2018/02/eufy-lumi-smooth-fader/","image":"https://schuett.io/postimg/eufi-lumi/3J7A7599.jpg","headline":"eufy Lumi Stick-On: Fading Night Light","dateModified":"2018-02-23T00:00:00+01:00","datePublished":"2018-02-23T00:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://schuett.io/2018/02/eufy-lumi-smooth-fader/"},"description":"Do you have a dark stairway at night and you want it to be illuminated when you come across? This is why you bought the eufy Lumi Stick-On pack? Now you don’t use it because it switches on immediately when you get in its range?","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    

    <title>eufy Lumi Stick-On: Fading Night Light &middot; schuett.io</title>

    <meta name="author" content="Dennis Schütt" />

    
    <!--<meta name="description" content="The ATtiny10 powered smooth fading night light">-->
    

    <link rel="alternate" type="application/rss+xml" title="schuett.io &middot; another tech blog.
" href="/feed.xml" />

    


    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
    

    

    

    <!-- inject:css -->
    <link rel="stylesheet" href="/assets/stylesheets/styles.css">
    <!-- endinject -->


    <!--
    Touch Icon Generator BY daik.de
    http://www.web-stuebchen.de
    Lizenz: GNU General Public License
    Copyright: 2014 - 2018 Stephan Heller [daik.de] <heller@daik.de>
    -->
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="icon" type="image/gif" href="/assets/images/favicon.gif">
    <link rel="icon" type="image/png" href="/assets/images/favicon.png">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-57x57.png" sizes="57x57">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-60x60.png" sizes="60x60">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-72x72.png" sizes="72x72">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-76x76.png" sizes="76x76">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-114x114.png" sizes="114x114">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-128x128.png" sizes="128x128">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-144x144.png" sizes="144x144">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-180x180.png" sizes="180x180">
    <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon-precomposed.png">
    <link rel="icon" type="image/png" href="/assets/images/favicon-16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="/assets/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/assets/images/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/assets/images/favicon-160x160.png" sizes="160x160">
    <link rel="icon" type="image/png" href="/assets/images/favicon-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/assets/images/favicon-196x196.png" sizes="196x196">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-navbutton-color" content="#ffffff">
    <meta name="application-name" content="schuett.io"/>
    <meta name="msapplication-tooltip" content="schuett.io"/>
    <meta name="apple-mobile-web-app-title" content="schuett.io"/>

</head>


<body>

<!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]-->

<nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="https://schuett.io"> <span class="fa-layers fa-fw">
            <i class="far fa-window-maximize" style="" data-fa-transform=""></i>
            <i class="fas fa-chevron-left" data-fa-transform="shrink-13 down-2 left-4.7"></i>
            <i class="fas fa-chevron-right" data-fa-transform="shrink-13 down-2 right-4.7"></i>
            <i class="fas fa-cogs" data-fa-transform="shrink-11 down-2"></i>
        </span>
        <span>schuett.io</span></a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="/">Blog</a>

          </li>
        
        
        
          <li>
            






<a href="/tags">Tags</a>

          </li>
        
        
        
          <li>
            






<a href="/wtf">About</a>

          </li>
        
        
        
          <li>
            






<a href="/contact">Contact</a>

          </li>
        
        
        
          <li>
            






<a href="/imprint">Imprint</a>

          </li>
        
        

          
      </ul>
    </div>

	

  </div>
</nav>


<!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          <div class="page-image">
          
              <picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7599-1000-e6bc88ff2.webp 1000w, /assets/images/postimg/eufi-lumi/3J7A7599-2000-e6bc88ff2.webp 2000w" type="image/webp"><source srcset="/assets/images/postimg/eufi-lumi/3J7A7599-1000-e6bc88ff2.jpg 1000w, /assets/images/postimg/eufi-lumi/3J7A7599-2000-e6bc88ff2.jpg 2000w" type="image/jpeg"><img src="/assets/images/postimg/eufi-lumi/3J7A7599-2000-e6bc88ff2.jpg" width="3449" height="2299"></picture>

          
          </div>
      </div>
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>eufy Lumi Stick-On: Fading Night Light</h1>
		  
		    
			<h2 class="post-subheading">The ATtiny10 powered smooth fading night light</h2>
			
		  

		  
		  <span class="post-meta">Posted on February 23, 2018</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

            
            
            
            

            <div id="header-gh-btns">
                
                
                
                <iframe src="https://ghbtns.com/github-btn.html?user=shyd&repo=eufy-lumi&type=star&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
                
                
                <iframe src="https://ghbtns.com/github-btn.html?user=shyd&repo=eufy-lumi&type=fork&count=true" frameborder="0" scrolling="0" width="120px" height="20px"></iframe>
                
                
                
                <iframe src="https://ghbtns.com/github-btn.html?user=shyd&type=follow&count=true" frameborder="0" scrolling="0" width="220px" height="20px"></iframe>
                
                
                
            </div>
            

            <article role="main" class="blog-post">
                <p>Do you have a dark stairway at night and you want it to be illuminated when you come across? This is why you bought the <a href="http://amzn.to/2EJ5D2Z" target="_blank">eufy Lumi Stick-On pack</a>? Now you don’t use it because it switches on immediately when you get in its range?</p>

<p>I encountered this situation an thought about it. In conclusion I came up with modifying the inner circuit by adding an ATtiny10 to slowly ramp up the LED brightness with a PWM.</p>

<h2 id="1-open-up-lumi">1. Open up Lumi</h2>

<p>After unscrewing four screws inside the battery housing you can easily pull the housing into two pieces. But don’t pull to far and watch the wires connected to either pieces.</p>

<picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7595-1000-8e73671b8.webp 1000w, /assets/images/postimg/eufi-lumi/3J7A7595-2000-8e73671b8.webp 2000w" type="image/webp"></source><source srcset="/assets/images/postimg/eufi-lumi/3J7A7595-1000-8e73671b8.jpg 1000w, /assets/images/postimg/eufi-lumi/3J7A7595-2000-8e73671b8.jpg 2000w" type="image/jpeg"></source><img class="img-responsive img-rounded" src="/assets/images/postimg/eufi-lumi/3J7A7595-2000-8e73671b8.jpg" width="5760" height="3840"></picture>

<h2 id="2-desolder-r9">2. Desolder R9</h2>

<p>Carefully desolder <em>R9</em>, marked in red.</p>

<picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7595-2-marked-799-abb77950c.webp 799w" type="image/webp"></source><source srcset="/assets/images/postimg/eufi-lumi/3J7A7595-2-marked-799-abb77950c.jpg 799w" type="image/jpeg"></source><img class="img-responsive img-rounded" src="/assets/images/postimg/eufi-lumi/3J7A7595-2-marked-799-abb77950c.jpg" width="799" height="533"></picture>

<h2 id="3-resolder-r9">3. Resolder R9</h2>

<p>Then resolder <em>R9</em> in a 90° angle like so and connect <code class="language-plaintext highlighter-rouge">OC0A</code> to the resistor (green wire).</p>

<picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7596-2-844-7cd7453f6.webp 844w" type="image/webp"></source><source srcset="/assets/images/postimg/eufi-lumi/3J7A7596-2-844-7cd7453f6.jpg 844w" type="image/jpeg"></source><img class="img-responsive img-rounded" src="/assets/images/postimg/eufi-lumi/3J7A7596-2-844-7cd7453f6.jpg" width="844" height="563"></picture>

<h2 id="4-solder-supply-wires-for-the-attiny10">4. Solder supply wires for the ATtiny10</h2>

<p>Make sure to solder one wire to the same terminal as the red wire from the battery housing, this is <em>VCC</em> for the ATtiny10.</p>

<p>Connect <em>GND</em> to the open pad of <em>R9</em> which is <code class="language-plaintext highlighter-rouge">DRAIN</code> from <em>Q1</em>.</p>

<picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7596-1000-70d31b4ff.webp 1000w, /assets/images/postimg/eufi-lumi/3J7A7596-2000-70d31b4ff.webp 2000w" type="image/webp"></source><source srcset="/assets/images/postimg/eufi-lumi/3J7A7596-1000-70d31b4ff.jpg 1000w, /assets/images/postimg/eufi-lumi/3J7A7596-2000-70d31b4ff.jpg 2000w" type="image/jpeg"></source><img class="img-responsive img-rounded" src="/assets/images/postimg/eufi-lumi/3J7A7596-2000-70d31b4ff.jpg" width="5760" height="3840"></picture>

<h2 id="5-write-some-piece-of-code">5. Write some piece of code</h2>

<p>To put some life in the Tiny, compile this piece of code below or from <a href="https://github.com/shyd/eufy-lumi" target="_blank">https://github.com/shyd/eufy-lumi</a>.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><table class="rouge-table"><tbody><tr>
<td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td>
<td class="code"><pre><span class="cm">/*
 * fader.c
 *
 * Created: 03.01.2018 20:55:13
 * Author : Dennis Schuett &lt;https://schuett.io&gt;
 */</span>

<span class="cp">#define F_CPU 1000000UL
</span>
<span class="cp">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;
</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="cm">/* OC0A as output */</span>
    <span class="n">DDRB</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PINB0</span><span class="p">);</span>

    <span class="cm">/* Set OC0A/OC0B on Compare Match when up-counting.
    Clear OC0A/OC0B on Compare Match when down-counting.
    Mode 5: Fast PWM, 8-bit (with WGM02) */</span>
    <span class="n">TCCR0A</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">COM0A1</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">COM0A0</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">WGM00</span><span class="p">);</span>

    <span class="cm">/* Prescaler clk/8 */</span>
    <span class="n">TCCR0B</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">CS01</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">WGM02</span><span class="p">);</span>

    <span class="n">OCR0A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mh">0xFF</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_delay_us</span><span class="p">(</span><span class="mi">2250</span><span class="p">);</span>
        <span class="n">OCR0A</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">OCR0A</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></figure>

<p>And flash this little guy:</p>

<picture><source srcset="/assets/images/postimg/eufi-lumi/3J7A7597-1000-b4a8b9390.webp 1000w, /assets/images/postimg/eufi-lumi/3J7A7597-2000-b4a8b9390.webp 2000w" type="image/webp"></source><source srcset="/assets/images/postimg/eufi-lumi/3J7A7597-1000-b4a8b9390.jpg 1000w, /assets/images/postimg/eufi-lumi/3J7A7597-2000-b4a8b9390.jpg 2000w" type="image/jpeg"></source><img class="img-responsive img-rounded" src="/assets/images/postimg/eufi-lumi/3J7A7597-2000-b4a8b9390.jpg" width="5760" height="3840"></picture>

<p>Wire the Tiny—then darken your room and give it a test. Lumi should now smoothly fade on.</p>

            </article>

            
            <div class="blog-tags">
                Tags:
                
                
                <a href="/tags#Hardware">Hardware</a>
                
                <a href="/tags#C/C++">C/C++</a>
                
                <a href="/tags#Microcontroller">Microcontroller</a>
                
                
            </div>
            

            
            <!-- Check if any share-links are active -->





            

            <ul class="pager blog-pager">
                
                <li class="previous">
                    <a href="/2017/10/welcome-to-jekyll/" data-toggle="tooltip" data-placement="top" title="Welcome to Jekyll!">&larr; Previous Post</a>
                </li>
                
                
            </ul>

            
            <div class="disqus-comments">
                
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'dev-shyd';
        var disqus_identifier = '2018-02-23-eufy-lumi-smooth-fader';
        var disqus_title = 'eufy Lumi Stick-On: Fading Night Light';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


            </div>
            
        </div>
    </div>
</div>


<footer>
    <div class="container beautiful-jekyll-footer">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS" target="_blank"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                                    <span class="sr-only">RSS</span>
                                </a>
                    </li><li><a href="/contact" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                                    <span class="sr-only">Email me</span>
                                </a>
                    </li><li><a href="https://github.com/shyd" title="GitHub" target="_blank"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
                                    <span class="sr-only">GitHub</span>
                                </a>
                    </li><li><a href="https://hub.docker.com/u/shyd" title="Docker" target="_blank"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-docker fa-stack-1x fa-inverse"></i>
                </span>
                                    <span class="sr-only">Docker</span>
                                </a>
                    </li><li><a href="https://www.instagram.com/d_nn__" title="Instagram" target="_blank"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
                </span>
                                    <span class="sr-only">Instagram</span>
                                </a>
                    </li></ul>
                <p class="copyright text-muted">
                    &copy; Dennis Schütt
                    &nbsp;&bull;&nbsp;
                    2020

                    
                    &nbsp;&bull;&nbsp;
                    made with ❤️ by <a href="https://schuett.io">schuett.io</a>
                    

                    
                </p>
                <!-- Please don't remove this, keep my open source work credited :) -->
                <p class="theme-by text-muted">
                    Theme by
                    <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
                </p>
            </div>
        </div>
    </div>
</footer>


<!-- inject:js -->
<script src="/assets/javascript/index.js"></script>
<!-- endinject -->



</body>
</html>
