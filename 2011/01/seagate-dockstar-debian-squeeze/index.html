<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Jekyll v4.1.1"><meta property=og:title content="Seagate Dockstar Debian Squeeze"><meta name=author content="Dennis Sch√ºtt"><meta property=og:locale content=en_US><meta name=description content="It‚Äôs been some days now when I got my dockstar and I‚Äôve been reading along the web to get more and more information about how to get debian to work with the dockstar. There are a couple of HowTo‚Äôs out there, but I had to check at least a few of them to get to know what I wanted to know. So I decided to make my own HowTo as kind as a merged one with everything important in it."><meta property=og:description content="It‚Äôs been some days now when I got my dockstar and I‚Äôve been reading along the web to get more and more information about how to get debian to work with the dockstar. There are a couple of HowTo‚Äôs out there, but I had to check at least a few of them to get to know what I wanted to know. So I decided to make my own HowTo as kind as a merged one with everything important in it."><link rel=canonical href=https://schuett.io/2011/01/seagate-dockstar-debian-squeeze/ ><meta property=og:url content=https://schuett.io/2011/01/seagate-dockstar-debian-squeeze/ ><meta property=og:site_name content=schuett.io><meta property=og:image content=https://schuett.io/b3843d67f7bd397fe172020717c5679776e19fce.png><meta property=og:type content=article><meta property=article:published_time content=2011-01-17T22:59:59+01:00><meta name=twitter:card content=summary_large_image><meta property=twitter:image content=https://schuett.io/b3843d67f7bd397fe172020717c5679776e19fce.png><meta property=twitter:title content="Seagate Dockstar Debian Squeeze"><script type=application/ld+json>{"datePublished":"2011-01-17T22:59:59+01:00","image":"https://schuett.io/b3843d67f7bd397fe172020717c5679776e19fce.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://schuett.io/2011/01/seagate-dockstar-debian-squeeze/"},"url":"https://schuett.io/2011/01/seagate-dockstar-debian-squeeze/","author":{"@type":"Person","name":"Dennis Sch√ºtt"},"description":"It‚Äôs been some days now when I got my dockstar and I‚Äôve been reading along the web to get more and more information about how to get debian to work with the dockstar. There are a couple of HowTo‚Äôs out there, but I had to check at least a few of them to get to know what I wanted to know. So I decided to make my own HowTo as kind as a merged one with everything important in it.","headline":"Seagate Dockstar Debian Squeeze","dateModified":"2011-01-17T22:59:59+01:00","@type":"BlogPosting","@context":"https://schema.org"}</script><title>Seagate Dockstar Debian Squeeze &middot; schuett.io</title><meta name=author content="Dennis Sch√ºtt"><link rel=alternate type=application/rss+xml title="schuett.io &middot; another tech blog.
" href=/feed.xml><link rel=stylesheet href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=/assets/stylesheets/styles-9045b1fd1b.min.css><link rel="shortcut icon" type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/gif href=/assets/images/favicon.gif><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-57x57.png sizes=57x57><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-60x60.png sizes=60x60><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-72x72.png sizes=72x72><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-76x76.png sizes=76x76><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-114x114.png sizes=114x114><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-120x120.png sizes=120x120><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-128x128.png sizes=128x128><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-144x144.png sizes=144x144><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-152x152.png sizes=152x152><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-180x180.png sizes=180x180><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-precomposed.png><link rel=icon type=image/png href=/assets/images/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon-160x160.png sizes=160x160><link rel=icon type=image/png href=/assets/images/favicon-192x192.png sizes=192x192><link rel=icon type=image/png href=/assets/images/favicon-196x196.png sizes=196x196><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-navbutton-color content=#ffffff><meta name=application-name content=schuett.io><meta name=msapplication-tooltip content=schuett.io><meta name=apple-mobile-web-app-title content=schuett.io></head><body><!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]--><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=https://schuett.io><span class="fa-layers fa-fw"><i class="far fa-window-maximize" style="" data-fa-transform=""></i> <i class="fas fa-chevron-left" data-fa-transform="shrink-13 down-2 left-4.7"></i> <i class="fas fa-chevron-right" data-fa-transform="shrink-13 down-2 right-4.7"></i> <i class="fas fa-cogs" data-fa-transform="shrink-11 down-2"></i> </span><span>schuett.io</span></a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a href=/ >Blog</a></li><li><a href=/tags>Tags</a></li><li><a href=/wtf>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/imprint>Imprint</a></li></ul></div></div></nav><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-image large"><picture><source srcset="/assets/images/b3843d67f7bd397fe172020717c5679776e19fce-512-5b3e5e438.webp 512w" type=image/webp><source srcset="/assets/images/b3843d67f7bd397fe172020717c5679776e19fce-512-5b3e5e438.png 512w" type=image/png><img src=/assets/images/b3843d67f7bd397fe172020717c5679776e19fce-512-5b3e5e438.png width=512 height=636></picture></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Seagate Dockstar Debian Squeeze</h1><span class=post-meta>Posted on January 17, 2011</span></div></div></div></div></div></header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>It‚Äôs been some days now when I got my dockstar and I‚Äôve been reading along the web to get more and more information about how to get debian to work with the dockstar. There are a couple of HowTo‚Äôs out there, but I had to check at least a few of them to get to know what I wanted to know. So I decided to make my own HowTo as kind as a merged one with everything important in it.</p><p>Of course the first step was to unbox the little homeserver, but the second one, the most important step if you are going to put it online is to disable the Pogoplug software <em>before</em> you connect it to the internet by simply disabling the autoupdate on the NAND. You have done this already? Skip to part two! Well then, you have to go offline, yes your wan-interface must go down. üò±</p><h1 id=1-cut-pogo-from-the-www>1. Cut Pogo from the WWW</h1><p>If you don‚Äôt have a DHCP running to get the IP-Address of the dockstar you can figure it out with this line at your desktop computer with <code class="language-plaintext highlighter-rouge">nmap -e eth0 -sP $(printf ‚Äú169.254.%d.%d‚Äù 0xbe 0xef)</code> where the last octets are the end of the MAC-Address as read on the sticker at the dockstar‚Äôs buttom.</p><p>Now you are ready to engage a ssh session to the dockstar:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nv>$ </span>ssh <span class=nt>-l</span> root ip_of_dockstar <span class=c># password will be stxadmin</span>
<span class=nt>-bash-3</span>.2: killall hbwd <span class=c># stop Pogoplug-Updater</span>
<span class=nt>-bash-3</span>.2: mount <span class=nt>-o</span> remount,rw / <span class=c># remount flash with read-write</span>
<span class=nt>-bash-3</span>.2: vi /etc/init.d/rcS
</code></pre></div></div><p>Now comment this line out to permanently disable autostart of the updater:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>"/etc/init.d/hbmgr.sh start" to "#/etc/init.d/hbmgr.sh start"
</code></pre></div></div><p>If you are done remount the flash readonly again:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nt>-bash-3</span>.2: mount <span class=nt>-o</span> remount,ro /
</code></pre></div></div><p>In my HowTo I will skip the part making backups of the original Pogoplug software because I am optimistic not to brick my dockstar or sell it in some days with pogo. üòÜ</p><h1 id=2-install-debian-squeeze-on-usb-stick>2. Install Debian Squeeze on USB Stick</h1><p>With this done we have to prepare a propper usb-stick, some guys say 2 GB are enough, I recommend at least 2 GB, I took a 4 GB stick to have some space to play with.</p><p>Make sure the stick is partitioned like <code class="language-plaintext highlighter-rouge">sda1</code> as root filesystem and <code class="language-plaintext highlighter-rouge">sda2</code> as swap, I use 256 MB for swap and the rest as rootfs. Just take <code class="language-plaintext highlighter-rouge">gparted</code> on your desktop computer an partition your drive. You don‚Äôt have to format <code class="language-plaintext highlighter-rouge">sda1</code>, the installscript will do:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>cd</span> /tmp
<span class=c>#wget http://jeff.doozan.com/debian/dockstar.debian-squeeze.sh #debootstrap won't work</span>
wget http://dev.shyd.de/dockstar/dockstar.debian-squeeze.sh <span class=c>#old debootstrap will work</span>
<span class=nb>chmod</span> +x dockstar.debian-squeeze.sh
<span class=nb>export </span><span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/usr/sbin:/sbin
./dockstar.debian-squeeze.sh
</code></pre></div></div><p>This will take some time to be done, get yourself a coffee.<br>After your device reboots, it may have a different IP address (it‚Äôs identifying as ‚Äòdebian‚Äô to the DHCP server now instead of ‚ÄòPogoplug‚Äô). Don‚Äôt worry if the green LED stops flashing, the current kernel doesn‚Äôt support it!<br>Now you can login as root using password root.</p><h1 id=3-install-new-kernel>3. Install new Kernel</h1><p>Well, we want to get the LED back flashing and probably some modules for usb devices and other optimizations, therefor we install the the heavykernel by gorgone:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>root@debian: <span class=nb>cd</span> /tmp
<span class=c># root@debian: wget 193.16.217.9/files/dockstarheavy.deb # seems to be down, so use my backup:</span>
root@debian: wget http://files.schuett.io/dockstar/dockstarheavy.deb <span class=c># backup file I used</span>
root@debian: dpkg <span class=nt>-i</span> <span class=nt>--force-overwrite</span> dockstarheavy.deb
root@debian: <span class=nb>mv</span> /boot/uInitrd /boot/org.uInitrd <span class=c># very important, otherwise device wont boot again</span>
</code></pre></div></div><p>To make the LED ‚Äúknow what to do‚Äù you have to edit two more files:</p><p>add to <code class="language-plaintext highlighter-rouge">/etc/rc.local</code></p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>echo </span>default-on <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>green<span class=se>\:</span>health/trigger
<span class=nb>echo </span>none       <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>orange<span class=se>\:</span>misc/trigger
</code></pre></div></div><p>and in <code class="language-plaintext highlighter-rouge">/etc/init.d/halt</code> find</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>log_action_msg <span class=s2>"Will now halt"</span>
halt <span class=nt>-d</span> <span class=nt>-f</span> <span class=nv>$netdown</span> <span class=nv>$poweroff</span> <span class=nv>$hddown</span>
</code></pre></div></div><p>add after</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>echo </span>none <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>green<span class=se>\:</span>health/trigger
</code></pre></div></div><p>to set it off, when the system halts.<br>Now take a reboot.</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>root@debian: reboot
</code></pre></div></div><p>Once it comes up again the LED flashes green, while booting it flashes in orange heartbeat mode. After the boot sequence it now should stay green.</p><h1 id=4-optimizations>4. Optimizations</h1><p>Due to security change the rootpw, also speed up upgrades by modifying the <code class="language-plaintext highlighter-rouge">sources.list</code> to a server nearby and update the repos:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>passwd
vi /etc/apt/sources.list
apt-get update
</code></pre></div></div><p>Install your favorite editor, vim for me:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>apt-get <span class=nb>install </span>vim
</code></pre></div></div><p>To enable syntax highlighting for root uncomment this line in:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/vim/vimrc
syntax on
</code></pre></div></div><p>Probably you want to change the hostname:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/hostname
</code></pre></div></div><p>When running a server it‚Äôs recommended to set a static ip:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/network/interfaces
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
  address 192.168.0.10
  netmask 255.255.255.0
  gateway 192.168.0.1
</code></pre></div></div><p>If you have change the network, make sure the DNS is correct:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/resolv.conf
192.168.0.1
</code></pre></div></div><p>In case you want to change the timezone, type:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>dpkg-reconfigure tzdata
</code></pre></div></div><p>For now your dockstar is more or less ready to use, just install software for your needs.<br>If <code class="language-plaintext highlighter-rouge">df -h</code> doesn‚Äôt look that good, don‚Äôt worry, it‚Äôs no problem to change to a bigger stick. Just in short: Mount both sticks as <code class="language-plaintext highlighter-rouge">/media/old</code> and <code class="language-plaintext highlighter-rouge">/media/new</code> and then <code class="language-plaintext highlighter-rouge">cp -a /media/old/* /media/new/</code>.</p><p>This is not the end of the story, I have some plans to do with my dockstar, stay tuned though.</p><h1 id=5-reference>5. Reference</h1><ul><li><a href=http://jeff.doozan.com/debian/ target=_blank>http://jeff.doozan.com/debian/</a></li><li><a href=http://forum.doozan.com/read.php?2,582 target=_blank>http://forum.doozan.com/read.php?2,582</a></li><li><a href=http://www.dermute.de/132-dockstar-debian-squeeze-kernel target=_blank>http://www.dermute.de/132-dockstar-debian-squeeze-kernel</a></li></ul></article><div class=blog-tags>Tags: <a href=/tags#Hardware>Hardware</a> <a href=/tags#HowTo>HowTo</a> <a href=/tags#Dockstar>Dockstar</a> <a href=/tags#Linux>Linux</a> <a href=/tags#Kernel>Kernel</a></div><ul class="pager blog-pager"><li class=previous><a href=/2010/05/howto-listen-to-webradio-using-your-ps3/ data-toggle=tooltip data-placement=top title="HowTo listen to webradio using your PS3">&larr; Previous Post</a></li><li class=next><a href=/2011/01/dockstar-nas-automount-hd-idle-samba-ftp/ data-toggle=tooltip data-placement=top title="Dockstar-NAS: Automount, hd-idle, Samba, FTP">Next Post &rarr;</a></li></ul><div class=disqus-comments><div class=comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'dev-shyd';
        var disqus_identifier = '433 http://dev.shyd.de/?p=433';
        var disqus_title = 'Seagate Dockstar Debian Squeeze';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=/feed.xml title=RSS target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i> </span><span class=sr-only>RSS</span></a></li><li><a href=/contact title="Email me"><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-envelope fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Email me</span></a></li><li><a href=https://github.com/shyd title=GitHub target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i> </span><span class=sr-only>GitHub</span></a></li><li><a href=https://hub.docker.com/u/shyd title=Docker target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-docker fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Docker</span></a></li><li><a href=https://www.instagram.com/d_nn__ title=Instagram target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-instagram fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Instagram</span></a></li></ul><p class="copyright text-muted">&copy; Dennis Sch√ºtt &nbsp;&bull;&nbsp; 2020 &nbsp;&bull;&nbsp; made with ‚ù§Ô∏è by <a href=https://schuett.io>schuett.io</a></p><p class="theme-by text-muted">Theme by <a href=http://deanattali.com/beautiful-jekyll/ >beautiful-jekyll</a></p></div></div></div></footer><script src=/assets/javascript/index-c3e323855a.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-18006649-7','auto');ga('set','anonymizeIp',true);ga('send','pageview');</script></body></html>