<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Jekyll v4.1.1"><meta property=og:title content="Debian as Printserver and Scanserver with HPLIP, CUPS, SANE"><meta name=author content="Dennis Schütt"><meta property=og:locale content=en_US><meta name=description content="It’s nice to have a little home-server like the Seagate Dockstar or the Buffalo Linkstation running debian quite smoothly. What do you do if you would like to use your printer and scanner with more than one device?"><meta property=og:description content="It’s nice to have a little home-server like the Seagate Dockstar or the Buffalo Linkstation running debian quite smoothly. What do you do if you would like to use your printer and scanner with more than one device?"><link rel=canonical href=https://schuett.io/2011/03/debian-printserver-scanserver-hplip-cups-sane/ ><meta property=og:url content=https://schuett.io/2011/03/debian-printserver-scanserver-hplip-cups-sane/ ><meta property=og:site_name content=schuett.io><meta property=og:image content=https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png><meta property=og:type content=article><meta property=article:published_time content=2011-03-05T18:10:08+01:00><meta name=twitter:card content=summary_large_image><meta property=twitter:image content=https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png><meta property=twitter:title content="Debian as Printserver and Scanserver with HPLIP, CUPS, SANE"><script type=application/ld+json>{"datePublished":"2011-03-05T18:10:08+01:00","image":"https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://schuett.io/2011/03/debian-printserver-scanserver-hplip-cups-sane/"},"url":"https://schuett.io/2011/03/debian-printserver-scanserver-hplip-cups-sane/","author":{"@type":"Person","name":"Dennis Schütt"},"description":"It’s nice to have a little home-server like the Seagate Dockstar or the Buffalo Linkstation running debian quite smoothly. What do you do if you would like to use your printer and scanner with more than one device?","headline":"Debian as Printserver and Scanserver with HPLIP, CUPS, SANE","dateModified":"2011-03-05T18:10:08+01:00","@type":"BlogPosting","@context":"https://schema.org"}</script><title>Debian as Printserver and Scanserver with HPLIP, CUPS, SANE &middot; schuett.io</title><meta name=author content="Dennis Schütt"><link rel=alternate type=application/rss+xml title="schuett.io &middot; another tech blog.
" href=/feed.xml><link rel=stylesheet href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=/assets/stylesheets/styles-9045b1fd1b.min.css><link rel="shortcut icon" type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/gif href=/assets/images/favicon.gif><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-57x57.png sizes=57x57><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-60x60.png sizes=60x60><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-72x72.png sizes=72x72><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-76x76.png sizes=76x76><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-114x114.png sizes=114x114><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-120x120.png sizes=120x120><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-128x128.png sizes=128x128><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-144x144.png sizes=144x144><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-152x152.png sizes=152x152><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-180x180.png sizes=180x180><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-precomposed.png><link rel=icon type=image/png href=/assets/images/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon-160x160.png sizes=160x160><link rel=icon type=image/png href=/assets/images/favicon-192x192.png sizes=192x192><link rel=icon type=image/png href=/assets/images/favicon-196x196.png sizes=196x196><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-navbutton-color content=#ffffff><meta name=application-name content=schuett.io><meta name=msapplication-tooltip content=schuett.io><meta name=apple-mobile-web-app-title content=schuett.io></head><body><!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]--><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=https://schuett.io><span class="fa-layers fa-fw"><i class="far fa-window-maximize" style="" data-fa-transform=""></i> <i class="fas fa-chevron-left" data-fa-transform="shrink-13 down-2 left-4.7"></i> <i class="fas fa-chevron-right" data-fa-transform="shrink-13 down-2 right-4.7"></i> <i class="fas fa-cogs" data-fa-transform="shrink-11 down-2"></i> </span><span>schuett.io</span></a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a href=/ >Blog</a></li><li><a href=/tags>Tags</a></li><li><a href=/wtf>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/imprint>Imprint</a></li></ul></div></div></nav><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-image large"><picture><source srcset="/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.webp 220w" type=image/webp><source srcset="/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.png 220w" type=image/png><img src=/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.png width=220 height=259></picture></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Debian as Printserver and Scanserver with HPLIP, CUPS, SANE</h1><span class=post-meta>Posted on March 5, 2011</span></div></div></div></div></div></header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>It’s nice to have a little home-server like the Seagate Dockstar or the Buffalo Linkstation running debian quite smoothly. What do you do if you would like to use your printer and scanner with more than one device?</p><p>Yes, you connect it to your server and share it over the network! Because I had to set this up in two locations for now I decided to write down those steps I took from powering on the printer through printing the first testpage I can scan later on.</p><p>This HowTo requires debian squeeze installed on your Dockstar/Linkstation. If you haven’t done this yet, please refer to other articles in this blog.</p><h1 id=1-printserver>1. Printserver</h1><h2 id=11-cups>1.1 CUPS</h2><p>First of all we install cups, a powerful, web based printermanager:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>apt-get <span class=nb>install </span>cups
</code></pre></div></div><p>Make the frontend accessible:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/cups/cupsd.conf
<span class=c>#Listen localhost:631 # comment these two lines</span>
<span class=c>#Listen /var/run/cups/cups.sock</span>

<span class=c># Allow remote access</span>
Port 631
</code></pre></div></div><p>There are some lines in the config you may want to edit, not to require logins:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>&lt;location&gt;&lt;/location&gt;
  Order allow,deny
  Allow 192.168.0.0/24
&lt;location&gt;&lt;/location&gt;

&lt;location /admin&gt;
  Order allow,deny
  Allow 192.168.0.0/24
&lt;/location&gt;

&lt;location /admin/conf&gt;
  #AuthType Default
  #Require user @SYSTEM
  Order allow,deny
  Allow 192.168.0.0/24
&lt;/location&gt;
</code></pre></div></div><p>After restarting cups you should be able to login the web interface on <a href=http://dockstar:631 target=_blank>http://dockstar:631</a>.</p><h2 id=12-hplip>1.2 HPLIP</h2><p>In my case I have an ALL-IN-ONE Device from HP. I tested this HowTo with a psc-1310-series and a Photosmart C4100. To get our printer ready to print we need hplip:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>apt-get <span class=nb>install </span>hplip
</code></pre></div></div><p>Once it is installed, there is a tool for adding printers:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>hp-setup <span class=nt>-i</span> <span class=c># interactive mode (no GUI)</span>
</code></pre></div></div><p>Just follow the instructions and you will have your printer installed properly. If you now look into CUPS you should be able to print a testpage with the newly installed printer.</p><h2 id=13-install-the-shared-printer-in-windows>1.3 Install the shared printer in Windows</h2><p>To install the printer go to Control Panel, Devices and Printers and click <em>Add a printer</em>:</p><picture><source srcset="/assets/images/464dae06819de70da4794f34eb1fdc60a0fa04bf-681-14b0ed18c.webp 681w" type=image/webp><source srcset="/assets/images/464dae06819de70da4794f34eb1fdc60a0fa04bf-681-14b0ed18c.jpg 681w" type=image/jpeg><img class="img-responsive img-rounded" src=/assets/images/464dae06819de70da4794f34eb1fdc60a0fa04bf-681-14b0ed18c.jpg width=681 height=528></picture><p>Click <em>Add a network, wireless or Bluetooth printer</em>:</p><picture><source srcset="/assets/images/e763b770e7b9c7a4ad185b9bba6259140f7e2ded-628-bf6700c17.webp 628w" type=image/webp><source srcset="/assets/images/e763b770e7b9c7a4ad185b9bba6259140f7e2ded-628-bf6700c17.jpg 628w" type=image/jpeg><img class="img-responsive img-rounded" src=/assets/images/e763b770e7b9c7a4ad185b9bba6259140f7e2ded-628-bf6700c17.jpg width=628 height=458></picture><p>Then click <em>The printer that I want isn’t listed</em>:</p><picture><source srcset="/assets/images/af644610764429e5156d9515475f9b0cbbdafd9a-628-90ec8656d.webp 628w" type=image/webp><source srcset="/assets/images/af644610764429e5156d9515475f9b0cbbdafd9a-628-90ec8656d.jpg 628w" type=image/jpeg><img class="img-responsive img-rounded" src=/assets/images/af644610764429e5156d9515475f9b0cbbdafd9a-628-90ec8656d.jpg width=628 height=458></picture><p>Select the second radio button and fill in the correct URL for your printer in CUPS:</p><picture><source srcset="/assets/images/868a348148f58995de7ea5ed8564867bbc9a0300-628-627f2b32a.webp 628w" type=image/webp><source srcset="/assets/images/868a348148f58995de7ea5ed8564867bbc9a0300-628-627f2b32a.jpg 628w" type=image/jpeg><img class="img-responsive img-rounded" src=/assets/images/868a348148f58995de7ea5ed8564867bbc9a0300-628-627f2b32a.jpg width=628 height=458></picture><p>In the following steps you have to select and install the correct driver which fits to your device. When you are ready test the whole setup with another testpage from your windows machine.</p><h1 id=2-scanserver>2. Scanserver</h1><h1 id=21-configure-sane-backend>2.1 Configure Sane-backend</h1><p><del>When you install hplip the sane backends come with it as dependency</del> (obviously we have to install the package), so we only need to install inetd in order to make sane accessible from the network:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>apt-get <span class=nb>install </span>inetutils-inetd sane-utils
</code></pre></div></div><p>Add your network to <code class="language-plaintext highlighter-rouge">saned.conf</code>:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/sane.d/saned.conf
</code></pre></div></div><p>Enable sane:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/default/saned
<span class=c># Set to yes to start saned</span>
<span class=nv>RUN</span><span class=o>=</span><span class=nb>yes</span>
</code></pre></div></div><p>Configure inetd:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>vim /etc/inetd.conf
<span class=c># add this line:</span>
sane-port	stream	tcp	nowait	saned:saned	/usr/sbin/saned saned
</code></pre></div></div><p>Make sure enabled in <code class="language-plaintext highlighter-rouge">/etc/services</code>:</p><div class="language-plaintext highlighter-rouge"><div class=highlight><pre class=highlight><code>sane-port    6566/tcp    sane saned    # SANE network scanner daemon
</code></pre></div></div><p>Now restart the services:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>service inetutils-inetd restart
service saned restart
</code></pre></div></div><p>Run these tests to check if sane sees your scanner:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>sane-find-scanner
</code></pre></div></div><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>scanimage <span class=nt>-L</span>
</code></pre></div></div><h2 id=22-install-sane-twain-on-the-client>2.2 Install sane-twain on the client</h2><p>Go to <a href=http://sanetwain.ozuzo.net target=_blank>http://sanetwain.ozuzo.net</a> and download the newest version. Perform an installation as described.<br>Go and test the connection, scan your first image.</p><h2 id=23-troubleshoot>2.3 Troubleshoot</h2><p>If you have problems with accessing the sane backends the usb-device probably doesn’t have the proper rights.<br>Try to modify them. In my case I had to <code class="language-plaintext highlighter-rouge">chmod</code> the device:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>chmod </span>666 /proc/bus/usb/001/002 <span class=c># find out yours</span>
</code></pre></div></div><p>Examples for USB devices would be <code class="language-plaintext highlighter-rouge">/dev/usbscanner</code> or <code class="language-plaintext highlighter-rouge">/dev/usb/scanner0</code>, <code class="language-plaintext highlighter-rouge">/proc/bus/usb/001/005</code> or <code class="language-plaintext highlighter-rouge">/dev/bus/usb/001/005</code>, parallel port scanners are connected for example to <code class="language-plaintext highlighter-rouge">/dev/parport0</code>.</p><h1 id=3-references>3. References</h1><ul><li><a href=http://www.dermute.de/215-dockstar-tuning-teil-3 target=_blank>http://www.dermute.de/215-dockstar-tuning-teil-3</a></li><li><a href=http://penguin-breeder.org/sane/saned/ target=_blank>http://penguin-breeder.org/sane/saned/</a></li><li><a href=http://sanetwain.ozuzo.net/ target=_blank>http://sanetwain.ozuzo.net/</a></li></ul></article><div class=blog-tags>Tags: <a href=/tags#Hardware>Hardware</a> <a href=/tags#HowTo>HowTo</a> <a href=/tags#Dockstar>Dockstar</a> <a href=/tags#Linux>Linux</a> <a href=/tags#Linkstation>Linkstation</a> <a href="/tags#Raspberry Pi">Raspberry Pi</a> <a href=/tags#Goflex>Goflex</a></div><ul class="pager blog-pager"><li class=previous><a href=/2011/02/dockstar-howto-setup-openvpn-debian/ data-toggle=tooltip data-placement=top title="Dockstar: HowTo setup OpenVPN on Debian">&larr; Previous Post</a></li><li class=next><a href=/2011/03/motorola-defy-instabile-verbindung-bei-wlan-802-11n/ data-toggle=tooltip data-placement=top title="Motorola Defy: instabile Verbindung bei WLAN 802.11n">Next Post &rarr;</a></li></ul><div class=disqus-comments><div class=comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'dev-shyd';
        var disqus_identifier = '555 http://dev.shyd.de/?p=555';
        var disqus_title = 'Debian as Printserver and Scanserver with HPLIP, CUPS, SANE';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=/feed.xml title=RSS target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i> </span><span class=sr-only>RSS</span></a></li><li><a href=/contact title="Email me"><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-envelope fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Email me</span></a></li><li><a href=https://github.com/shyd title=GitHub target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i> </span><span class=sr-only>GitHub</span></a></li><li><a href=https://hub.docker.com/u/shyd title=Docker target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-docker fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Docker</span></a></li><li><a href=https://www.instagram.com/d_nn__ title=Instagram target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-instagram fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Instagram</span></a></li></ul><p class="copyright text-muted">&copy; Dennis Schütt &nbsp;&bull;&nbsp; 2020 &nbsp;&bull;&nbsp; made with ❤️ by <a href=https://schuett.io>schuett.io</a></p><p class="theme-by text-muted">Theme by <a href=http://deanattali.com/beautiful-jekyll/ >beautiful-jekyll</a></p></div></div></div></footer><script src=/assets/javascript/index-c3e323855a.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-18006649-7','auto');ga('set','anonymizeIp',true);ga('send','pageview');</script></body></html>