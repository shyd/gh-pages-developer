<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Jekyll v4.1.1"><meta property=og:title content="Dockstar: new Kernel 3.3.3 ready to use"><meta name=author content="Dennis Schütt"><meta property=og:locale content=en_US><meta name=description content="As you may have noticed, we were discussing things about newer kernels and drivers in the comments of Dockstar/Goflex: new Kernel 3.1.10 ready to use. With that in mind I started up my VM and looked at what I’ve got there in /usr/src – there was a compiled 3.2.1 that initially wouldn’t boot. But following davy’s guide to upgrade U-Boot makes that one boot."><meta property=og:description content="As you may have noticed, we were discussing things about newer kernels and drivers in the comments of Dockstar/Goflex: new Kernel 3.1.10 ready to use. With that in mind I started up my VM and looked at what I’ve got there in /usr/src – there was a compiled 3.2.1 that initially wouldn’t boot. But following davy’s guide to upgrade U-Boot makes that one boot."><link rel=canonical href=https://schuett.io/2012/04/kernel-3-3-3-ready-to-use/ ><meta property=og:url content=https://schuett.io/2012/04/kernel-3-3-3-ready-to-use/ ><meta property=og:site_name content=schuett.io><meta property=og:image content=https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png><meta property=og:type content=article><meta property=article:published_time content=2012-04-26T14:31:20+02:00><meta name=twitter:card content=summary_large_image><meta property=twitter:image content=https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png><meta property=twitter:title content="Dockstar: new Kernel 3.3.3 ready to use"><script type=application/ld+json>{"datePublished":"2012-04-26T14:31:20+02:00","image":"https://schuett.io/f1d3f2586770c5e9c9a4acdc5d50579a8968857a.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://schuett.io/2012/04/kernel-3-3-3-ready-to-use/"},"url":"https://schuett.io/2012/04/kernel-3-3-3-ready-to-use/","author":{"@type":"Person","name":"Dennis Schütt"},"description":"As you may have noticed, we were discussing things about newer kernels and drivers in the comments of Dockstar/Goflex: new Kernel 3.1.10 ready to use. With that in mind I started up my VM and looked at what I’ve got there in /usr/src – there was a compiled 3.2.1 that initially wouldn’t boot. But following davy’s guide to upgrade U-Boot makes that one boot.","headline":"Dockstar: new Kernel 3.3.3 ready to use","dateModified":"2012-04-26T14:31:20+02:00","@type":"BlogPosting","@context":"https://schema.org"}</script><title>Dockstar: new Kernel 3.3.3 ready to use &middot; schuett.io</title><meta name=author content="Dennis Schütt"><link rel=alternate type=application/rss+xml title="schuett.io &middot; another tech blog.
" href=/feed.xml><link rel=stylesheet href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=/assets/stylesheets/styles-9045b1fd1b.min.css><link rel="shortcut icon" type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/x-icon href=/assets/images/favicon.ico><link rel=icon type=image/gif href=/assets/images/favicon.gif><link rel=icon type=image/png href=/assets/images/favicon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon.png><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-57x57.png sizes=57x57><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-60x60.png sizes=60x60><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-72x72.png sizes=72x72><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-76x76.png sizes=76x76><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-114x114.png sizes=114x114><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-120x120.png sizes=120x120><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-128x128.png sizes=128x128><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-144x144.png sizes=144x144><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-152x152.png sizes=152x152><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-180x180.png sizes=180x180><link rel=apple-touch-icon href=/assets/images/apple-touch-icon-precomposed.png><link rel=icon type=image/png href=/assets/images/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/assets/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/assets/images/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=/assets/images/favicon-160x160.png sizes=160x160><link rel=icon type=image/png href=/assets/images/favicon-192x192.png sizes=192x192><link rel=icon type=image/png href=/assets/images/favicon-196x196.png sizes=196x196><meta name=msapplication-TileColor content=#ffffff><meta name=msapplication-navbutton-color content=#ffffff><meta name=application-name content=schuett.io><meta name=msapplication-tooltip content=schuett.io><meta name=apple-mobile-web-app-title content=schuett.io></head><body><!--[if lt IE 10]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> to improve your experience.</p>
<![endif]--><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a class=navbar-brand href=https://schuett.io><span class="fa-layers fa-fw"><i class="far fa-window-maximize" style="" data-fa-transform=""></i> <i class="fas fa-chevron-left" data-fa-transform="shrink-13 down-2 left-4.7"></i> <i class="fas fa-chevron-right" data-fa-transform="shrink-13 down-2 right-4.7"></i> <i class="fas fa-cogs" data-fa-transform="shrink-11 down-2"></i> </span><span>schuett.io</span></a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a href=/ >Blog</a></li><li><a href=/tags>Tags</a></li><li><a href=/wtf>About</a></li><li><a href=/contact>Contact</a></li><li><a href=/imprint>Imprint</a></li></ul></div></div></nav><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-image large"><picture><source srcset="/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.webp 220w" type=image/webp><source srcset="/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.png 220w" type=image/png><img src=/assets/images/f1d3f2586770c5e9c9a4acdc5d50579a8968857a-220-3eef370d9.png width=220 height=259></picture></div></div><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Dockstar: new Kernel 3.3.3 ready to use</h1><span class=post-meta>Posted on April 26, 2012</span></div></div></div></div></div></header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>As you may have noticed, we were discussing things about newer kernels and drivers in the comments of <a href=/2012/01/kernel-3-1-10-ready-to-use/ >Dockstar/Goflex: new Kernel 3.1.10 ready to use</a>. With that in mind I started up my VM and looked at what I’ve got there in <code class="language-plaintext highlighter-rouge">/usr/src</code> – there was a compiled 3.2.1 that initially wouldn’t boot. But following davy’s guide to upgrade U-Boot makes that one boot.</p><p>Taking a look at <a href=http://kernel.org/ target=_blank>kernel.org</a> made me jealous… Here it is – a fully working 3.3.3:</p><h1 id=1-upgrading-u-boot>1. Upgrading U-Boot</h1><p>It is absolutely necessary to get a newer version than provided in Jeff’s script. Otherwise your dockstar will fail to boot up. If this happens you need to revert to a lower version of the kernel than 3.2.x (find help here: Dockstar: <a href=/2011/03/dockstar-no-boot-self-compiled-kernel/ >Does not boot with self-compiled Kernel?</a>).</p><p>For now I didn’t get the kernel working with the goflex series, so this article is dedicated to dockstar users only.</p><p>What you need to do is carefully read through davy’s post <a href=http://forum.doozan.com/read.php?3,6965 target=_blank>Newer uBoot as workaround to 3.2 kernel problem?</a> and follow these steps before installing my kernel.</p><h1 id=2-upgrade-the-kernel>2. Upgrade the Kernel</h1><p>This part is analogue to my other articles concerning kernel installations:</p><p><strong>If you know what you are doing you are ready to download and install the kernel. I am not responsible for any malfunctions or damages on your device!</strong></p><p>I assume that you already set the arcNumber to 2998 to make the kernel identify the dockstar as a dockstar. You can install it as follows:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>cd</span> /tmp
wget http://dev.shyd.de/dockstar/linux-image-3.3.3-dockstar-shyd_1.1_armel.deb
dpkg <span class=nt>-i</span> linux-image-3.3.3-dockstar-shyd_1.1_armel.deb

<span class=nb>cd</span> /boot
/usr/bin/mkimage <span class=nt>-A</span> arm <span class=nt>-O</span> linux <span class=nt>-T</span> kernel  <span class=nt>-C</span> none <span class=nt>-a</span> 0x00008000 <span class=nt>-e</span> 0x00008000 <span class=nt>-n</span> Linux-3.3.3 <span class=nt>-d</span> /boot/vmlinuz-3.3.3-dockstar-shyd /boot/uImage

/usr/bin/mkimage <span class=nt>-A</span> arm <span class=nt>-O</span> linux <span class=nt>-T</span> ramdisk <span class=nt>-C</span> <span class=nb>gzip</span> <span class=nt>-a</span> 0x00000000 <span class=nt>-e</span> 0x00000000 <span class=nt>-n</span> initramfs <span class=nt>-d</span> /boot/initrd.img-3.3.3-dockstar-shyd /boot/uInitrd
</code></pre></div></div><p>You can leave the arcNumber untouched. In this case the LED will go off once the kernel has been loaded.</p><p>Once the device booted up again log in and check the output of <code class="language-plaintext highlighter-rouge">uname -r</code>:</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>uname</span> <span class=nt>-r</span>
3.3.3-dockstar-shyd
</code></pre></div></div><h1 id=led-setup>LED setup</h1><p>You have to edit two files:</p><p>add to <code class="language-plaintext highlighter-rouge">/etc/rc.local</code></p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>echo </span>default-on <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>green<span class=se>\:</span>health/trigger
<span class=nb>echo </span>none       <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>orange<span class=se>\:</span>misc/trigger
</code></pre></div></div><p>and in <code class="language-plaintext highlighter-rouge">/etc/init.d/halt</code> find</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code>log_action_msg <span class=s2>"Will now halt"</span>
halt <span class=nt>-d</span> <span class=nt>-f</span> <span class=nv>$netdown</span> <span class=nv>$poweroff</span> <span class=nv>$hddown</span>
</code></pre></div></div><p>add after</p><div class="language-bash highlighter-rouge"><div class=highlight><pre class=highlight><code><span class=nb>echo </span>none <span class=o>&gt;</span> /sys/class/leds/dockstar<span class=se>\:</span>green<span class=se>\:</span>health/trigger
</code></pre></div></div><p>to set it off, when the system halts.</p></article><div class=blog-tags>Tags: <a href=/tags#Hardware>Hardware</a> <a href=/tags#Dockstar>Dockstar</a> <a href=/tags#Linux>Linux</a> <a href=/tags#Kernel>Kernel</a></div><ul class="pager blog-pager"><li class=previous><a href=/2012/03/technical-announcement/ data-toggle=tooltip data-placement=top title="Technical Announcements">&larr; Previous Post</a></li><li class=next><a href=/2012/04/ipv6-launch/ data-toggle=tooltip data-placement=top title="Preparing for the Future: IPv6">Next Post &rarr;</a></li></ul><div class=disqus-comments><div class=comments><div id=disqus_thread></div><script type=text/javascript>var disqus_shortname = 'dev-shyd';
        var disqus_identifier = '917 http://dev.shyd.de/?p=917';
        var disqus_title = 'Dockstar: new Kernel 3.3.3 ready to use';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></div></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=/feed.xml title=RSS target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-rss fa-stack-1x fa-inverse"></i> </span><span class=sr-only>RSS</span></a></li><li><a href=/contact title="Email me"><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fas fa-envelope fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Email me</span></a></li><li><a href=https://github.com/shyd title=GitHub target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-github fa-stack-1x fa-inverse"></i> </span><span class=sr-only>GitHub</span></a></li><li><a href=https://hub.docker.com/u/shyd title=Docker target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-docker fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Docker</span></a></li><li><a href=https://www.instagram.com/d_nn__ title=Instagram target=_blank><span class="fa-stack fa-lg" aria-hidden=true><i class="fas fa-circle fa-stack-2x"></i> <i class="fab fa-instagram fa-stack-1x fa-inverse"></i> </span><span class=sr-only>Instagram</span></a></li></ul><p class="copyright text-muted">&copy; Dennis Schütt &nbsp;&bull;&nbsp; 2021 &nbsp;&bull;&nbsp; made with ❤️ by <a href=https://schuett.io>schuett.io</a></p><p class="theme-by text-muted">Theme by <a href=http://deanattali.com/beautiful-jekyll/ >beautiful-jekyll</a></p></div></div></div></footer><script src=/assets/javascript/index-34a5463a7c.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-18006649-7','auto');ga('set','anonymizeIp',true);ga('send','pageview');</script></body></html>